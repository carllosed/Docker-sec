FROM almalinux:9.4
RUN yum update -y && yum upgrade -y
RUN yum install -y java-1.8.0-openjdk wget
ENV TOMCAT_VERSION 7.0.81
RUN wget -O /tmp/apache-tomcat-${TOMCAT_VERSION}.tar.gz https://archive.apache.org/dist/tomcat/tomcat-7/v${TOMCAT_VERSION}/bin/apache-tomcat-${TOMCAT_VERSION}.tar.gz
RUN tar xvfz /tmp/apache-tomcat-${TOMCAT_VERSION}.tar.gz -C /usr/local
RUN mv /usr/local/apache-tomcat-${TOMCAT_VERSION} /usr/local/tomcat && \
    rm /tmp/apache-tomcat-${TOMCAT_VERSION}.tar.gz /usr/local/tomcat/conf/web.xml
COPY web.xml /usr/local/tomcat/conf/web.xml
CMD ["/usr/local/tomcat/bin/catalina.sh", "run"]
